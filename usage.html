<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2013-07-12 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>GMavenPlus Plugin - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20130712" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://groovy.github.com/GMavenPlus/index.html" id="bannerLeft">
                                                <img src="images/logos/GMavenPlusLogo_sm.png" alt="GMavenPlus" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2013-07-12</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0-beta-2-SNAPSHOT</span>
                      </div>
            <div class="xright">        
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="plugin-info.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
            <strong>Usage</strong>
          </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2>Usage<a name="Usage"></a></h2>
<p>The following examples describe the basic usage of the GMavenPlus Plugin.</p>
<ul>
<li><a href="#Basic_Usage">Basic Usage</a></li>
<li><a href="#Mixed_Compilation">Mixed Compilation</a></li>
<li><a href="#InvokeDynamic">InvokeDynamic</a></li>
<li><a href="#Generate_Groovydoc">Generate Groovydoc</a></li>
<li><a href="#Add_Groovydoc_to_Site">Add Groovydoc to Site</a></li>
<li><a href="#Execute_Scripts">Execute Scripts</a></li></ul>
<div class="section">
<h3><a name="Basic_Usage">Basic Usage</a></h3>
<p>To compile Groovy code as part of the project compilation when there are no dependencies between Java and Groovy, you should add something similar to the following in your pom:</p>
<div class="source">
<pre>&lt;project&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.gmavenplus&lt;/groupId&gt;
        &lt;artifactId&gt;gmavenplus-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.0-beta-2-SNAPSHOT&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;compile&lt;/goal&gt;
              &lt;goal&gt;testCompile&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
      &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
      &lt;!-- any version of Groovy should work here --&gt;
      &lt;version&gt;2.1.6&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;
</pre></div>
<p>To compile both the main and test Groovy sources, simply execute the normal compile phase from the default lifecycle:</p>
<div class="source">
<pre>mvn compile
</pre></div></div>
<div class="section">
<h3><a name="Mixed_Compilation">Mixed Compilation</a></h3>
<p>To compile projects where you have mixed Java and Groovy (with dependencies between the two), you'll need to generate stubs in addition to normal compilation. To do this, you should add something similar to the following in your pom:</p>
<div class="source">
<pre>&lt;project&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.gmavenplus&lt;/groupId&gt;
        &lt;artifactId&gt;gmavenplus-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.0-beta-2-SNAPSHOT&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;generateStubs&lt;/goal&gt;
              &lt;goal&gt;compile&lt;/goal&gt;
              &lt;goal&gt;testGenerateStubs&lt;/goal&gt;
              &lt;goal&gt;testCompile&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
      &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
      &lt;!-- any version of Groovy \&gt;= 1.7.0 should work here --&gt;
      &lt;version&gt;2.1.6&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;
</pre></div>
<p>To compile both the main and test Groovy and Java sources, simply execute the normal compile phase from the default lifecycle:</p>
<div class="source">
<pre>mvn compile
</pre></div></div>
<div class="section">
<h3><a name="InvokeDynamic">InvokeDynamic</a></h3>
<p>To take advantage of <a class="externalLink" href="http://docs.oracle.com/javase/7/docs/technotes/guides/vm/multiple-language-support.html#invokedynamic">invokedynamic</a>, you need to include the Groovy jar that <a class="externalLink" href="http://groovy.codehaus.org/InvokeDynamic+support">supports it</a> and set the configuration option. If you only include the Groovy indy jar without setting the configuration option only Groovy's classes will take advantage of invokedynamic, your classes will not. To do this, you should add something similar to the following in your pom:</p>
<div class="source">
<pre>&lt;project&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.gmavenplus&lt;/groupId&gt;
        &lt;artifactId&gt;gmavenplus-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.0-beta-2-SNAPSHOT&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;compile&lt;/goal&gt;
              &lt;goal&gt;testCompile&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;invokeDynamic&gt;true&lt;/invokeDynamic&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
      &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
      &lt;!-- any version of Groovy \&gt;= 2.1 should work here --&gt;
      &lt;version&gt;2.1.6&lt;/version&gt;
      &lt;classifier&gt;indy&lt;/classifier&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;
</pre></div>
<p>To compile both the main and test Groovy sources, simply execute the normal compile phase from the default lifecycle:</p>
<div class="source">
<pre>mvn compile
</pre></div></div>
<div class="section">
<h3><a name="Generate_Groovydoc">Generate Groovydoc</a></h3>
<p>To generate Groovydoc manually, you only need add the plugin (no need to configure any executions). To do this, you should add something similar to the following in your pom:</p>
<div class="source">
<pre>&lt;project&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.gmavenplus&lt;/groupId&gt;
        &lt;artifactId&gt;gmavenplus-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.0-beta-2-SNAPSHOT&lt;/version&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
      &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
      &lt;!-- any version of Groovy \&gt;= 1.6.2 should work here --&gt;
      &lt;version&gt;2.1.6&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;
</pre></div>
<p>To generate the groovydoc for the main sources, simply execute GMavenPlus's groovydoc goal:</p>
<div class="source">
<pre>mvn gplus:groovydoc
</pre></div></div>
<div class="section">
<h3><a name="Add_Groovydoc_to_Site">Add Groovydoc to Site</a></h3>
<p>Note that this mojo is not set up to be used in the &lt;reporting&gt; section. So you will need to set the &lt;outputDirectory&gt; and &lt;executions&gt; to mimic this functionality. To do this, you should add something similar to the following in your pom:</p>
<div class="source">
<pre>&lt;project&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.gmavenplus&lt;/groupId&gt;
        &lt;artifactId&gt;gmavenplus-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.0-beta-2-SNAPSHOT&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;site&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;groovydoc&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;groovydocOutputDirectory&gt;${project.reporting.outputDirectory}/gapidocs&lt;/groovydocOutputDirectory&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
      &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
      &lt;!-- any version of Groovy \&gt;= 1.6.2 should work here --&gt;
      &lt;version&gt;2.1.6&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;
</pre></div>
<p>To generate the groovydoc for the main sources, simply execute the normal site phase from the default lifecycle:</p>
<div class="source">
<pre>mvn site
</pre></div></div>
<div class="section">
<h3><a name="Execute_Scripts">Execute Scripts</a></h3>
<p>Note that if you'd like to separate script dependencies from those of your project, you can use Groovy's <a class="externalLink" href="http://groovy.codehaus.org/Grape">@Grab</a> annotations, but you will need a compile dependency on Ivy. Any compile dependencies your project uses are also available for use in your scripts. This example demonstrates both. Note that you need to escape any dollar signs in your script so Maven doesn't try to filter the values. To execute Groovy scripts in your pom, add something similar to the following:</p>
<div class="source">
<pre>&lt;project&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.gmavenplus&lt;/groupId&gt;
        &lt;artifactId&gt;gmavenplus-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.0-beta-2-SNAPSHOT&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;execute&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;scripts&gt;
            &lt;script&gt;&lt;![CDATA[
              @Grapes([
                  @Grab(group='commons-lang', module='commons-lang', version='2.6')
              ])
              import org.apache.commons.lang.SystemUtils
              import org.slf4j.Logger
              import org.slf4j.LoggerFactory
              Logger logger = LoggerFactory.getLogger(&quot;chapters.introduction.HelloWorld1&quot;)
              logger.debug(&quot;Hello world.&quot;)
              File targetDir = new File('target')
              if (!targetDir.exists())
                  targetDir.mkdir()
              new File(targetDir, 'javaVersion.txt').append(&quot;Using Java $${SystemUtils.JAVA_VERSION}&quot;)
            ]]&gt;&lt;/script&gt;
          &lt;/scripts&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
      &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
      &lt;!-- any version of Groovy should work here --&gt;
      &lt;version&gt;2.1.6&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;!-- this is only needed because the script uses it --&gt;
      &lt;groupId&gt;org.apache.ivy&lt;/groupId&gt;
      &lt;artifactId&gt;ivy&lt;/artifactId&gt;
      &lt;version&gt;2.2.0&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;!-- this is only needed because the script uses it --&gt;
      &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
      &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
      &lt;version&gt;1.0.13&lt;/version&gt;
      &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;
</pre></div>
<p>To execute your script(s), simply execute GMavenPlus's execute goal:</p>
<div class="source">
<pre>mvn gplus:execute
</pre></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2011-2013.
          All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
